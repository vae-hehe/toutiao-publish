(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5d5cb5f6"],{1064:function(e,t,a){},"1f64":function(e,t,a){"use strict";var n=a("1064"),i=a.n(n);i.a},"685c":function(e,t,a){"use strict";a.d(t,"d",(function(){return i})),a.d(t,"c",(function(){return o})),a.d(t,"b",(function(){return s})),a.d(t,"a",(function(){return c}));var n=a("b775"),i=function(e){return Object(n["a"])({method:"POST",url:"/mp/v1_0/user/images",data:e})},o=function(e){return Object(n["a"])({method:"GET",url:"/mp/v1_0/user/images",params:e})},s=function(e){return Object(n["a"])({method:"DELETE",url:"/mp/v1_0/user/images/".concat(e)})},c=function(e,t){return Object(n["a"])({method:"PUT",url:"/mp/v1_0/user/images/".concat(e),data:{collect:t}})}},c120:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"image-list"},[a("el-radio-group",{staticStyle:{"margin-bottom":"20px"},attrs:{size:"mini"},on:{change:function(t){return e.loadImages(1)}},model:{value:e.collect,callback:function(t){e.collect=t},expression:"collect"}},[a("el-radio-button",{attrs:{label:!1}},[e._v("全部")]),a("el-radio-button",{attrs:{label:!0}},[e._v("收藏")])],1),e.isShowAdd?a("el-button",{staticStyle:{float:"right"},attrs:{type:"success",size:"mini"},on:{click:function(t){e.dialogUploadVisible=!0}}},[e._v("上传素材")]):e._e(),a("el-row",{attrs:{gutter:10}},e._l(e.images,(function(t,n){return a("el-col",{key:n,staticClass:"list",attrs:{lg:4,md:6,sm:6,xs:12}},[a("div",[e.isShowAction?a("div",{staticClass:"mask"},[a("el-button",{attrs:{type:"warning",circle:"",size:"mini",icon:t.is_collected?"el-icon-star-on":"el-icon-star-off",loading:t.loading},on:{click:function(a){return e.onCollected(t)}}}),a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",circle:"",size:"mini",loading:t.loading},on:{click:function(a){return e.ondeleteImage(t)}}})],1):e._e(),a("el-image",{staticStyle:{height:"100px"},attrs:{src:t.url,fit:"cover"},nativeOn:{click:function(t){e.selected=n}}}),e.isShowSelected&&e.selected===n?a("div",{staticClass:"selected"}):e._e()],1)])})),1),a("el-pagination",{staticStyle:{"margin-top":"20px"},attrs:{background:"",layout:"prev, pager, next",total:e.totalCount,"page-size":e.pageSize,"current-page":e.page},on:{"update:currentPage":function(t){e.page=t},"update:current-page":function(t){e.page=t},"current-change":e.onCurrentPage}}),a("el-dialog",{staticClass:"dialog",attrs:{title:"上传素材",visible:e.dialogUploadVisible,"append-to-body":!0,width:"30%"},on:{"update:visible":function(t){e.dialogUploadVisible=t}}},[a("el-upload",{staticClass:"upload-demo",attrs:{drag:"",action:"http://ttapi.research.itcast.cn/mp/v1_0/user/images",headers:e.uploadHeaders,name:"image","show-file-list":!1,"on-success":e.onUploadSuccess,multiple:""}},[a("i",{staticClass:"el-icon-upload"}),a("div",{staticClass:"el-upload__text"},[e._v("将文件拖到此处，或"),a("em",[e._v("点击上传")])]),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传jpg/png文件，且不超过500kb")])])],1)],1)},i=[],o=(a("4160"),a("159b"),a("96cf"),a("1da1")),s=a("685c"),c={name:"ImageList",components:{},props:{isShowAdd:{type:Boolean,default:!0},isShowAction:{type:Boolean,default:!0},isShowSelected:{type:Boolean,default:!1}},data:function(){var e=JSON.parse(window.localStorage.getItem("user"));return{collect:!1,images:[],dialogUploadVisible:!1,uploadHeaders:{Authorization:"Bearer ".concat(e.token)},page:1,pageSize:12,totalCount:0,selected:null}},computed:{},watch:{},created:function(){this.loadImages(1)},mounted:function(){},methods:{loadImages:function(){var e=arguments,t=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var n,i,o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return n=e.length>0&&void 0!==e[0]?e[0]:1,t.page=n,a.next=4,Object(s["c"])({collect:t.collect,page:n,per_page:t.pageSize});case 4:i=a.sent,o=i.data.data.results,o.forEach((function(e){e.loading=!1})),t.images=o,t.totalCount=i.data.data.total_count;case 9:case"end":return a.stop()}}),a)})))()},onUploadSuccess:function(){this.dialogUploadVisible=!1,this.loadImages(this.page)},onCurrentPage:function(e){this.loadImages(e)},ondeleteImage:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e.loading=!0,a.next=3,Object(s["b"])(e.id);case 3:a.sent,t.$confirm("确定删除这个图片吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.loadImages(t.page),t.$message({type:"success",message:"删除成功!"})})).catch((function(){t.$message({type:"info",message:"已取消删除"})})),e.loading=!1;case 6:case"end":return a.stop()}}),a)})))()},onCollected:function(e){var t=this;e.loading=!0,Object(s["a"])(e.id,!e.is_collected).then((function(a){!1===e.is_collected?(t.loadImages(t.page),t.$message({type:"success",message:"收藏成功!"}),e.loading=!1):(t.loadImages(t.page),t.$message({type:"success",message:"取消收藏成功!"}),e.loading=!1)}))}}},l=c,r=(a("1f64"),a("2877")),u=Object(r["a"])(l,n,i,!1,null,"9003b2ca",null);t["a"]=u.exports},e036:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"image-container"},[a("el-card",{staticClass:"filter-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),a("el-breadcrumb-item",[e._v("内容管理")]),a("el-breadcrumb-item",[e._v("素材管理")])],1)],1),a("image-list")],1)],1)},i=[],o=a("c120"),s={name:"ImageIndex",components:{ImageList:o["a"]},props:{},data:function(){return{}},computed:{},watch:{},mounted:function(){},methods:{}},c=s,l=a("2877"),r=Object(l["a"])(c,n,i,!1,null,"4bcc9900",null);t["default"]=r.exports}}]);
//# sourceMappingURL=chunk-5d5cb5f6.94969b38.js.map